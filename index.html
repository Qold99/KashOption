<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>China Int Post â€” Real-Time Tracking</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f4f4f4; color:#333; }
    header { background:#111; color:#fff; padding:20px; text-align:center; }
    #tracking-section { padding:20px; text-align:center; }
    input { padding:10px; width:300px; }
    button { padding:10px 20px; margin-left:10px; background:#007bff; color:#fff; border:none; cursor:pointer; }
    #status { margin-top:20px; font-size:18px; font-weight:bold; }
    #map { height:400px; margin:20px; }
    footer { background:#111; color:#fff; text-align:center; padding:10px; }

    /* Timeline styles */
    #timeline { margin:20px auto; max-width:600px; }
    .step { display:flex; align-items:center; margin:10px 0; }
    .dot {
      width:16px; height:16px; border-radius:50%;
      background:#ccc; margin-right:10px;
    }
    .step.done .dot { background:#28a745; }
    .step.active .dot { background:#007bff; }
    .step span { font-size:16px; }
    .progress-bar {
      width:100%; background:#ddd; height:10px; border-radius:5px; margin:20px 0;
    }
    .progress {
      height:10px; background:#007bff; border-radius:5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“¦ China Int Post Real-Time Tracking</h1>
  </header>

  <section id="tracking-section">
    <p>Enter your tracking number below:</p>
    <input type="text" id="trackingNumber" placeholder="e.g. CN123456789">
    <button onclick="trackPackage()">Track</button>
    <div id="status"></div>
  </section>

  <div id="map"></div>

  <div id="timeline"></div>
  <div class="progress-bar"><div class="progress" id="progress"></div></div>

  <footer>Â© 2025 China Int Post. All rights reserved.</footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // === Tracking Data (edit this section to update client info) ===
    const trackingDB = {
      "CN123456789": {
        lat: 30.5,
        lon: 160.0,
        status: "In transit â€” ocean freight",
        eta: "2026-01-08",
        lastUpdate: "2025-12-28T18:45:00Z",
        stepIndex: 1, // 0=Origin,1=Ocean,2=Customs,3=Delivery
        timeline: ["Origin Scan (China)", "Ocean Transit", "Customs Clearance (USA)", "Out for Delivery"]
      },
      "CN987654321": {
        lat: 37.7749,
        lon: -122.4194,
        status: "Arrived at US entry port",
        eta: "2026-01-02",
        lastUpdate: "2025-12-28T18:50:00Z",
        stepIndex: 2,
        timeline: ["Origin Scan (China)", "Ocean Transit", "Customs Clearance (USA)", "Out for Delivery"]
      }
    };

    // === Map Setup ===
    const map = L.map('map').setView([31.2304, 121.4737], 3); // Shanghai default
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom:18 }).addTo(map);
    let marker = L.marker([31.2304, 121.4737]).addTo(map).bindPopup("Package location");

    // === Tracking Function ===
    function trackPackage() {
      const code = document.getElementById('trackingNumber').value.trim();
      const statusDiv = document.getElementById('status');
      const timelineDiv = document.getElementById('timeline');
      const progressDiv = document.getElementById('progress');

      if (!trackingDB[code]) {
        statusDiv.innerText = "âŒ Tracking number not found.";
        timelineDiv.innerHTML = "";
        progressDiv.style.width = "0%";
        return;
      }

      const pkg = trackingDB[code];
      statusDiv.innerText = `ðŸ“¦ ${pkg.status} (ETA: ${pkg.eta})`;

      // Update map marker
      marker.setLatLng([pkg.lat, pkg.lon]);
      map.setView([pkg.lat, pkg.lon], 4);
      marker.bindPopup(`Package location â€” ${pkg.status}`).openPopup();

      // Render timeline
      timelineDiv.innerHTML = "";
      pkg.timeline.forEach((stage, i) => {
        const step = document.createElement("div");
        step.className = "step";
        if (i < pkg.stepIndex) step.classList.add("done");
        if (i === pkg.stepIndex) step.classList.add("active");
        step.innerHTML = `<div class="dot"></div><span>${stage}</span>`;
        timelineDiv.appendChild(step);
      });

      // Progress bar
      const percent = ((pkg.stepIndex+1) / pkg.timeline.length) * 100;
      progressDiv.style.width = percent + "%";
    }
  </script>
</body>
</html>
